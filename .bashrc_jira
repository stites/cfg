#!/bin/bash

# ============================================= #
# Jira sql queries for my jira commandline tool #
# ============================================= #
# using https://www.npmjs.org/package/jira-cli
# and remember to set up your .jiraclirc with SSL
# as shown in http://goo.gl/CQ4go8

function j {
  case "$1" in
    "-h")
      jira -h ;;
    *)
      jira $@;;
  esac
}

function jsq {
  sprint=
  stat=
  case "$1" in
    open)
      stat="status in (Open, 'In Progress', Reopened, 'Order Placed', 'To Do')";;
    closed)
      stat='status in (Resolved, Closed, Done)';;
    inprogress)
      stat='status="In Progress"';;
  esac

  if [ "$2" == "sprint" ];then
    sprint='AND sprint in openSprints()'
  fi

  echo "$stat $sprint AND assignee in (currentUser()) ORDER BY priority DESC, updatedDate ASC"
}
alias sprint='jira -s "$(jsl open sprint)"'
